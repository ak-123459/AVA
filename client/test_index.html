<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Streamed Audio Player with Logs</title>
</head>
<body>
  <h1>Streamed Audio Playback</h1>
  <button id="playBtn">Play Audio</button>

  <script>
    async function playStreamingAudio() {
      const apiUrl = "https://api.murf.ai/v1/speech/stream";
      const apiKey = "ap2_5c612e0f-8632-450c-9973-4d4035ba83be"; // your API key

      const requestBody = {
        text: `à¤à¤• à¤¬à¤¾à¤° à¤•à¥€ à¤¬à¤¾à¤¤ à¤¹à¥ˆ, à¤°à¤¾à¤® à¤”à¤° à¤¶à¥à¤¯à¤¾à¤® à¤¦à¥‹ à¤…à¤šà¥à¤›à¥‡ à¤¦à¥‹à¤¸à¥à¤¤ à¤¥à¥‡à¥¤ à¤à¤• à¤¦à¤¿à¤¨ à¤°à¤¾à¤® à¤•à¥‡ à¤ªà¤¾à¤à¤µ à¤®à¥‡à¤‚ à¤šà¥‹à¤Ÿ à¤²à¤— à¤—à¤ˆà¥¤ à¤¶à¥à¤¯à¤¾à¤® à¤¨à¥‡ à¤‰à¤¸à¥‡ à¤¤à¥à¤°à¤‚à¤¤ à¤…à¤ªà¤¨à¥€ à¤®à¤¦à¤¦ à¤¦à¥€, à¤ªà¤¾à¤¨à¥€ à¤ªà¤¿à¤²à¤¾à¤¯à¤¾ à¤”à¤° à¤†à¤°à¤¾à¤® à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤•à¤¹à¤¾à¥¤ à¤°à¤¾à¤® à¤¨à¥‡ à¤•à¤¹à¤¾, "à¤…à¤—à¤° à¤¤à¥à¤® à¤¨ à¤¹à¥‹à¤¤à¥‡, à¤¤à¥‹ à¤®à¥ˆà¤‚ à¤¬à¤¹à¥à¤¤ à¤ªà¤°à¥‡à¤¶à¤¾à¤¨ à¤¹à¥‹ à¤œà¤¾à¤¤à¤¾à¥¤" à¤¶à¥à¤¯à¤¾à¤® à¤®à¥à¤¸à¥à¤•à¤°à¤¾à¤¯à¤¾ à¤”à¤° à¤¬à¥‹à¤²à¤¾, "à¤¦à¥‹à¤¸à¥à¤¤à¥€ à¤•à¤¾ à¤®à¤¤à¤²à¤¬ à¤¹à¥€ à¤à¤•-à¤¦à¥‚à¤¸à¤°à¥‡ à¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤°à¤¨à¤¾ à¤¹à¥ˆà¥¤"

à¤‡à¤¸ à¤¤à¤°à¤¹ à¤¸à¤šà¥à¤šà¥€ à¤¦à¥‹à¤¸à¥à¤¤à¥€ à¤¹à¤®à¥‡à¤¶à¤¾ à¤¸à¤¾à¤¥ à¤¨à¤¿à¤­à¤¾à¤¤à¥€ à¤¹à¥ˆà¥¤`,
        voiceId: "hi-IN-kabir",
      };

      const startTime = performance.now();
      console.log("ðŸš€ Request started at:", new Date().toISOString());

      try {
        const response = await fetch(apiUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "api-key": apiKey,
          },
          body: JSON.stringify(requestBody),
        });

        const responseTime = performance.now();
        console.log("ðŸ“¥ Response received at:", new Date().toISOString());
        console.log(`â±ï¸ Time to get response: ${(responseTime - startTime).toFixed(2)} ms`);

        if (!response.ok) throw new Error("Network response was not OK");

        const contentType = response.headers.get("Content-Type") || "audio/wav";
        console.log("Response Content-Type:", contentType);

        const arrayBuffer = await response.arrayBuffer();
        const bufferTime = performance.now();
        console.log("ðŸ“¦ Audio data received and buffered at:", new Date().toISOString());
        console.log(`â±ï¸ Time to read audio buffer: ${(bufferTime - responseTime).toFixed(2)} ms`);

        const audioBlob = new Blob([arrayBuffer], { type: contentType });
        const audioUrl = URL.createObjectURL(audioBlob);
        const audio = new Audio(audioUrl);
        audio.controls = true;
        document.body.appendChild(audio);

        const beforePlayTime = performance.now();
        await audio.play();
        const playStartTime = performance.now();
        console.log("ðŸ”Š Audio started playing at:", new Date().toISOString());
        console.log(`â±ï¸ Time from buffered to play start: ${(playStartTime - beforePlayTime).toFixed(2)} ms`);
        console.log(`â±ï¸ Total time from request start to play start: ${(playStartTime - startTime).toFixed(2)} ms`);
      } catch (error) {
        console.error("âŒ Audio play error:", error);
      }
    }

    document.getElementById("playBtn").addEventListener("click", () => {
      playStreamingAudio();
    });
  </script>
</body>
</html>
